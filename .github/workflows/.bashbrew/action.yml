# https://github.com/docker-library/official-images/pull/13556#issuecomment-1319181339 ðŸ™ˆ
name: 'Shared Bashbrew Action'
description: 'Install the same version of Bashbrew consistently in all other GitHub Actions'
inputs:
  build:
    default: 'host' # or 'docker' or 'none'
runs:
  using: 'composite'
  steps:

    - uses: &bb docker-library/bashbrew@v0.1.13
      if: inputs.build == 'host'

    - shell: 'bash -Eeuo pipefail -x {0}'
      env:
        BB: *bb
      run: |
        echo "BASHBREW_VERSION=${BB##*@}" >> "$GITHUB_ENV"

    - run: docker build --pull --tag oisupport/bashbrew:base "https://github.com/docker-library/bashbrew.git#$BASHBREW_VERSION"
      shell: 'bash -Eeuo pipefail -x {0}'
      if: inputs.build == 'docker'
